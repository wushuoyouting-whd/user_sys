# Swagger è‡ªåŠ¨ç”Ÿæˆæ–¹æ¡ˆ

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

**åƒ Java æ³¨è§£ä¸€æ ·ç®€å•**ï¼šåªéœ€åœ¨ Entity å’Œè·¯ç”±ä¸Šæ·»åŠ  1-2 è¡Œæ³¨è§£ï¼Œè‡ªåŠ¨ç”Ÿæˆå®Œæ•´çš„ Swagger æ–‡æ¡£ï¼

## ğŸ“ æ–‡ä»¶ç»“æ„

```
src/
â”œâ”€â”€ swagger/
â”‚   â”œâ”€â”€ index.js             # ä¸»é…ç½®ï¼ˆè‡ªåŠ¨æ‰«ææ³¨è§£å’Œç”Ÿæˆ Swagger æ–‡æ¡£å’ŒUIï¼‰
â”‚   â”œâ”€â”€ entityToSwagger.js   # Entity è½¬ Swagger schema
â”‚   â”œâ”€â”€ autoScan.js          # è§£æ@Apiå’Œ@ApiTagæ³¨è§£ï¼Œä»app.jsä¸­æå–è·¯ç”±åŸºç¡€è·¯å¾„ï¼Œç”ŸæˆAPIæ–‡æ¡£
â”‚   â”œâ”€â”€ components.js        # é€šç”¨ç»„ä»¶ï¼ˆå‚æ•°PageParam/LimitParam/UserIdParamç­‰ã€å“åº”Success/BadRequest/NotFoundç­‰ï¼‰
â”‚   â”œâ”€â”€ README.md            # ä½¿ç”¨æŒ‡å—
â”‚   â”œâ”€â”€ schemas.auto.js      # è‡ªåŠ¨ç”Ÿæˆï¼ˆgitignoreä¸­å·²å¿½ç•¥ï¼‰
â”‚   â””â”€â”€ swagger.auto.js      # è‡ªåŠ¨ç”Ÿæˆï¼ˆgitignoreä¸­å·²å¿½ç•¥ï¼‰
â”œâ”€â”€ routes/
â”‚   â””â”€â”€ userRoutes.js        # ä½¿ç”¨æ³¨è§£çš„è·¯ç”±
â””â”€â”€ entities/
    â””â”€â”€ User.js              # ä½¿ç”¨æ³¨è§£çš„ Entity
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. Entity æ³¨è§£ï¼ˆå¯é€‰ï¼‰

åœ¨ Entity æ–‡ä»¶é¡¶éƒ¨æ·»åŠ ï¼š

```javascript
// src/entities/User.js
/**
 * @ApiEntity("ç”¨æˆ·")
 */
module.exports = new EntitySchema({
    name: 'User',
    // ...
});
```

**è¯´æ˜**ï¼šè¿™ä¸ªæ³¨è§£ä¸»è¦ç”¨äºæ–‡æ¡£è¯´æ˜ï¼ŒEntity schema ä¼šè‡ªåŠ¨ä» Entity å®šä¹‰ç”Ÿæˆã€‚

### 2. è·¯ç”±æ³¨è§£ï¼ˆå¿…éœ€ï¼‰

åœ¨è·¯ç”±æ–‡ä»¶ä¸­ï¼Œæ¯ä¸ªæ¥å£åªéœ€è¦ä¸€è¡Œæ³¨è§£ï¼š

```javascript
// src/routes/userRoutes.js
const router = require('express').Router();
const ctrl = require('../controllers/userController');
/**
 * @ApiTag("Users")  // åœ¨æ–‡ä»¶é¡¶éƒ¨å®šä¹‰æ ‡ç­¾
 */

// GET åˆ—è¡¨æ¥å£
/**
 * @Api("è·å–ç”¨æˆ·åˆ—è¡¨", "User", "pagination")
 */
router.get('/', ctrl.list);

// GET è¯¦æƒ…æ¥å£
/**
 * @Api("è·å–ç”¨æˆ·è¯¦æƒ…", "User")
 */
router.get('/:id', ctrl.getById);

// POST åˆ›å»ºæ¥å£
/**
 * @Api("åˆ›å»ºç”¨æˆ·", "User")
 */
router.post('/', validate(schema), ctrl.create);

// PUT æ›´æ–°æ¥å£
/**
 * @Api("æ›´æ–°ç”¨æˆ·", "User")
 */
router.put('/:id', validate(schema), ctrl.update);

// DELETE åˆ é™¤æ¥å£
/**
 * @Api("åˆ é™¤ç”¨æˆ·", "User", "empty")
 */
router.delete('/:id', ctrl.remove);

// æ—  Entity çš„æ¥å£
/**
 * @Api("ä¸Šä¼ æ–‡ä»¶", "", "empty")
 */
router.post('/upload', upload.single('file'), ctrl.upload);

// è‡ªå®šä¹‰å“åº”ç±»å‹
/**
 * @Api("è·å–ç»Ÿè®¡æ•°æ®", "Stat", "list")
 */
router.get('/stats', ctrl.getStats);
```

@Apiæ³¨è§£å‚æ•°

```javascript
@Api("æ¥å£æè¿°", "Entityåç§°", "å“åº”ç±»å‹")
```
å‚æ•°è¯´æ˜

1. **æ¥å£æè¿°**ï¼ˆå¿…éœ€ï¼‰ï¼šæ¥å£çš„ç®€çŸ­æè¿°
2. **Entity åç§°**ï¼ˆå¯é€‰ï¼‰ï¼šå¯¹åº”çš„ Entity åç§°ï¼Œç”¨äºç”Ÿæˆè¯·æ±‚/å“åº” schema
3. **å“åº”ç±»å‹**ï¼ˆå¯é€‰ï¼‰ï¼š
    - `single` - å•ä¸ªå¯¹è±¡ï¼ˆé»˜è®¤ï¼‰
    - `list` - å¯¹è±¡æ•°ç»„
    - `pagination` - åˆ†é¡µåˆ—è¡¨ï¼ˆåŒ…å« metaï¼‰
    - `empty` - æ— æ•°æ®è¿”å›

### 3. app.js é…ç½®

```javascript
// src/app.js
app.use('/api/users', userRoutes);
```

### 4. å¯åŠ¨æœåŠ¡

```bash
npm start

# è®¿é—®ï¼š`http://localhost:3000/swagger`
```

## âœ¨ è‡ªåŠ¨ç”Ÿæˆå†…å®¹

ç³»ç»Ÿä¼šè‡ªåŠ¨ï¼š
- âœ… ä» Entity ç”Ÿæˆ `User` å’Œ `UserInput` schemas
- âœ… ä»æ³¨è§£ç”Ÿæˆå®Œæ•´çš„ API æ–‡æ¡£
- âœ… è‡ªåŠ¨æ·»åŠ å‚æ•°ã€è¯·æ±‚ä½“ã€å“åº”å®šä¹‰
- âœ… è‡ªåŠ¨æ·»åŠ é”™è¯¯å“åº”ï¼ˆ400, 404, 500ï¼‰

## ğŸ“Š ä¼˜åŠ¿å¯¹æ¯”

| æ–¹å¼ | Entity | æ¯ä¸ªæ¥å£ | æ€»å·¥ä½œé‡ |
|------|--------|---------|---------|
| ä¼ ç»Ÿæ–¹å¼ | 50+ è¡Œ | 50+ è¡Œ | 100+ è¡Œ |
| **æ³¨è§£æ–¹å¼** | **1 è¡Œï¼ˆå¯é€‰ï¼‰** | **1 è¡Œ** | **2 è¡Œ** |

**å·¥ä½œé‡å‡å°‘ 98%ï¼** ğŸ‰


## ğŸ”§ å·¥ä½œåŸç†

1. **å¯åŠ¨æ—¶**ï¼šè‡ªåŠ¨æ‰«æ `src/entities/` ç›®å½•ï¼Œç”Ÿæˆæ‰€æœ‰ Entity çš„ Swagger schemas
2. **å¯åŠ¨æ—¶**ï¼šè‡ªåŠ¨æ‰«æ `src/routes/` ç›®å½•ï¼Œè§£æ `@Api` æ³¨è§£
3. **è¿è¡Œæ—¶**ï¼šä» `app.js` æå–è·¯ç”±åŸºç¡€è·¯å¾„
4. **ç”Ÿæˆ**ï¼šåˆå¹¶æ‰€æœ‰ä¿¡æ¯ï¼Œç”Ÿæˆå®Œæ•´çš„ Swagger æ–‡æ¡£

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **Entity åç§°**ï¼šå¿…é¡»ä¸ Entity å®šä¹‰ä¸­çš„ `name` å±æ€§ä¸€è‡´ï¼ˆé¦–å­—æ¯å¤§å†™ï¼‰
2. **è·¯ç”±è·¯å¾„**ï¼šç¡®ä¿ `app.js` ä¸­æ­£ç¡®é…ç½®äº†è·¯ç”±åŸºç¡€è·¯å¾„
3. **æ³¨è§£ä½ç½®**ï¼š`@Api` æ³¨è§£å¿…é¡»ç´§é‚» `router.method()` è°ƒç”¨ä¹‹å‰
4. **è‡ªåŠ¨ç”Ÿæˆæ–‡ä»¶**ï¼š`swagger.auto.js` ä¼šè‡ªåŠ¨ç”Ÿæˆï¼Œå·²åŠ å…¥ `.gitignore`

## ğŸ¯ æ€»ç»“

- âœ… **é›¶ç»´æŠ¤**ï¼šæ–°å»º Entity å’Œæ¥å£ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½® Swagger
- âœ… **æç®€æ³¨è§£**ï¼šæ¯ä¸ªæ¥å£åªéœ€ 1 è¡Œæ³¨è§£
- âœ… **è‡ªåŠ¨ç”Ÿæˆ**ï¼šEntity schema å’Œ API æ–‡æ¡£å…¨è‡ªåŠ¨ç”Ÿæˆ
- âœ… **ç±»ä¼¼ Java**ï¼šä½¿ç”¨æ–¹å¼ä¸ Java çš„ `@Api` æ³¨è§£ç±»ä¼¼


